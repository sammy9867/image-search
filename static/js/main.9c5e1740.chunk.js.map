{"version":3,"sources":["context/query-context.js","util/localStorage.js","context/theme-context.js","context/favourite-context.js","components/header/search/SearchBar.js","components/header/Header.js","components/individual-image/IndividualImage.js","util/constants.js","components/image-gallery/ImageGallery.js","hooks/useImageSearch.js","components/favourite-gallery/FavouriteGallery.js","views/home/Home.js","views/favourite/Favourite.js","views/error/Error.js","App.js","index.js"],"names":["SearchQueryContext","createContext","SearchQueryContextProvider","children","useState","query","setQuery","pageNumber","setPageNumber","Provider","value","useQueryValue","useContext","usePageNumberValue","getItemFromStorage","key","localStorage","JSON","parse","getItem","err","console","error","addItemToStorage","item","setItem","stringify","ThemeContext","ThemeContextProvider","persisted","isLightTheme","setIsLightTheme","useEffect","useThemeValue","FavouriteContext","initialState","favList","reducer","state","action","type","image","newFav","id","alt_description","regular","addToFavourite","payload","favImage","filter","x","removeFromFavourite","FavouriteContextProvider","useReducer","globalState","dispatch","useFavouriteValue","SearchBar","className","data-testid","aria-label","placeholder","onKeyDown","e","target","Header","sideBar","setSideBar","getNavClassName","onClick","to","color","checked","size","IndividualImage","index","find","isFavourite","setIsFavourite","downloadCoverRef","useRef","favouriteCoverRef","ref","idd","fetch","method","headers","then","response","arrayBuffer","buffer","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","catch","log","alt","onLoad","current","style","zIndex","src","BASE_URL","process","CLIENT_ID","ImageGallery","loading","setLoading","setError","images","setImages","hasMore","setHasMore","a","axios","params","client_id","page","res","prevImages","data","results","length","fetchImages","useImageSearch","observer","lastImageElementRef","useCallback","node","disconnect","IntersectionObserver","entries","isIntersecting","prevPageNumber","observe","map","urls","FavouriteGallery","fav","Home","getElementsByTagName","Favourite","Error","App","exact","path","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.9c5e1740.chunk.js","sourcesContent":["import React, { createContext, useContext, useState } from 'react';\r\n\r\nexport const SearchQueryContext = createContext();\r\n\r\nexport const SearchQueryContextProvider = ({ children }) => {\r\n  const [query, setQuery] = useState(\"mountains\");\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  return (\r\n    <SearchQueryContext.Provider value={{query, setQuery, pageNumber, setPageNumber}}>\r\n      {children}\r\n    </SearchQueryContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useQueryValue = () => {\r\n  const { query, setQuery } = useContext(SearchQueryContext);\r\n  return {query, setQuery };\r\n} \r\n\r\nexport const usePageNumberValue = () => {\r\n  const { pageNumber, setPageNumber } = useContext(SearchQueryContext);\r\n  return { pageNumber, setPageNumber }\r\n} ","export const clearStorage = () => localStorage.clear();\r\n\r\nexport const getItemFromStorage = (key) => {\r\n    if (!localStorage) return;\r\n        \r\n    try {\r\n        return JSON.parse(localStorage.getItem(key));\r\n    } catch (err) {\r\n        console.error(`Error getting item ${key} from localStorage`, err);\r\n    }\r\n};\r\n\r\nexport const addItemToStorage = (key, item) => {\r\n    if (!localStorage) return;\r\n\r\n    try {\r\n        return localStorage.setItem(key, JSON.stringify(item));\r\n    } catch (err) {\r\n        console.error(`Error storing item ${key} to localStorage`, err);\r\n    }\r\n};\r\n\r\nexport const removeItemFromStorage = (key) => {\r\n    if (!localStorage) return;\r\n\r\n    try {\r\n        return localStorage.removeItem(key);\r\n    } catch (err) {\r\n        console.error(`Error removing item ${key} from localStorage`, err);\r\n    }\r\n};","import React, { useEffect, createContext, useContext, useState } from 'react';\r\nimport { addItemToStorage, getItemFromStorage } from '../util/localStorage';\r\n\r\nconst initialState = true;\r\n\r\nexport const ThemeContext = createContext();\r\n\r\nexport const  ThemeContextProvider = ({ children }) => {\r\n  const [ isLightTheme, setIsLightTheme ] = useState(() => {\r\n    const persisted = getItemFromStorage(\"theme\");\r\n        return persisted != null\r\n        ? persisted\r\n        : initialState;\r\n  });\r\n\r\n  useEffect(() => {\r\n    addItemToStorage(\"theme\", isLightTheme);\r\n}, [isLightTheme]);\r\n\r\n  return (\r\n    <ThemeContext.Provider value={{isLightTheme, setIsLightTheme}}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useThemeValue = () => useContext(ThemeContext);","import React, { createContext, useContext, useReducer, useEffect } from 'react';\r\nimport { addItemToStorage, getItemFromStorage } from '../util/localStorage';\r\n\r\nexport const FavouriteContext = createContext();\r\n\r\nconst initialState = {\r\n    favList: []\r\n};\r\n\r\nconst reducer = (state, action) => {\r\n    switch (action.type) {\r\n      case \"ADD_FAV\":\r\n          return addToFavourite(state, action.payload.favImage);\r\n      case \"REMOVE_FAV\":\r\n          return removeFromFavourite(state, action.payload.favImage);\r\n      default:  \r\n          return state;\r\n    }\r\n};\r\n\r\nfunction addToFavourite(state, image) {\r\n    const newFav = {\r\n      id: image.id,\r\n      alt_description: image.alt_description,\r\n      regular: image.regular\r\n    };\r\n\r\n    return { \r\n        favList: [...state.favList, newFav] \r\n    };\r\n}\r\n\r\nfunction removeFromFavourite(state, image) {\r\n    return {\r\n        favList:  state.favList.filter(x => x.id !== image.id)\r\n    };\r\n}\r\n  \r\nexport const FavouriteContextProvider = ({ children }) => {\r\n    const [globalState, dispatch] = useReducer(reducer, initialState, (initialState) => {\r\n        const persisted = getItemFromStorage(\"fav\");\r\n        return persisted !== null\r\n        ? persisted\r\n        : initialState;\r\n    });\r\n\r\n    useEffect(() => {\r\n        addItemToStorage(\"fav\", globalState);\r\n    }, [globalState])\r\n\r\n    return (\r\n        <FavouriteContext.Provider value={{ globalState, dispatch}}>\r\n            {children}\r\n        </FavouriteContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useFavouriteValue = () => useContext(FavouriteContext);","import React from 'react';\r\nimport { FaSearch } from 'react-icons/fa';\r\nimport { useThemeValue, useQueryValue, usePageNumberValue } from '../../../context';\r\nimport './SearchBar.css';\r\n\r\nexport const SearchBar = () => {\r\n\r\n    const { isLightTheme } = useThemeValue();\r\n    const  { setQuery }  = useQueryValue();\r\n    const  { setPageNumber }  = usePageNumberValue();\r\n    return (\r\n        <div \r\n            className={isLightTheme ? \"search-container\" : \"search-container-dark\" }\r\n            data-testid={isLightTheme ? \"search-container\" : \"search-container-dark\"}\r\n        >  \r\n            <span data-testid=\"search-icon\"> <FaSearch /> </span>\r\n            <input \r\n                type=\"text\" \r\n                className=\"search-bar\"\r\n                aria-label=\"search bar\"\r\n                placeholder=\"Search...\"\r\n                onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                        setQuery(e.target.value);\r\n                        setPageNumber(1);\r\n                    }\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}","import React, { useState } from 'react';\r\nimport { SearchBar } from './search/SearchBar';\r\nimport { FaBars, FaHeart, FaHome, FaMoon } from 'react-icons/fa';\r\nimport { AiOutlineClose  } from 'react-icons/ai';\r\nimport { Link } from 'react-router-dom';\r\nimport { useThemeValue } from '../../context';\r\nimport './Header.css';\r\n\r\nexport const Header = () => {\r\n\r\n    const { isLightTheme, setIsLightTheme } = useThemeValue();\r\n    const [sideBar, setSideBar] = useState(false);  \r\n        \r\n    const getNavClassName = () => {\r\n        let className = \"sidebar\";\r\n        className += isLightTheme ? \" sidebar-light\" : \" sidebar-dark\";\r\n        className += sideBar ? \" sidebar-active\" : \"\";\r\n        return className;\r\n    }\r\n\r\n    return (\r\n        <header \r\n            className={isLightTheme ? \"header-light\" : \"header-dark\" }\r\n            data-testid={isLightTheme ? \"header-light\" : \"header-dark\" }\r\n        >\r\n            <span className=\"searchBar\"> <SearchBar /> </span>\r\n            <nav className={getNavClassName()}>\r\n                <ul className=\"topbar-items\">\r\n                    <li className=\"navbar-li\" data-testid=\"home-link\" onClick={() => {setSideBar(!sideBar)}}>\r\n                        <Link to=\"/\">\r\n                             <span className=\"nav-visibility\"> <FaHome color={isLightTheme ? \"black\" : \"white\"}/> </span>\r\n                             <span className={isLightTheme ? \"nav-text nav-light\" : \"nav-text nav-dark\"} ><b>Home</b></span>\r\n                        </Link>\r\n                    </li>\r\n\r\n                     <li className=\"navbar-li\" data-testid=\"fav-link\" onClick={() => {setSideBar(!sideBar)}}>\r\n                        <Link to=\"/favourite\">\r\n                            <span className=\"nav-visibility\"> <FaHeart color={isLightTheme ? \"black\" : \"white\"}/> </span>\r\n                            <span className={isLightTheme ? \"nav-text nav-light\" : \"nav-text nav-dark\"}><b>Favourite</b></span>\r\n                        </Link>\r\n                    </li>\r\n\r\n                    <li className=\"navbar-li\">\r\n                            <span className=\"nav-icon nav-visibility\"><FaMoon color={isLightTheme ? \"black\" : \"white\"}/> </span> \r\n                            <span className={isLightTheme ? \"nav-text nav-visibility nav-light\" : \"nav-text nav-visibility nav-dark\"}>\r\n                                <b>Dark Mode</b>\r\n                            </span>\r\n                        <label>\r\n                            <input \r\n                                aria-label=\"switch-theme\"\r\n                                type=\"checkbox\" \r\n                                checked={!isLightTheme}\r\n                                onClick={() => setIsLightTheme(!isLightTheme)} />\r\n                            <span className=\"check\"></span>\r\n                        </label>\r\n                    </li>                    \r\n                </ul>\r\n            </nav>\r\n\r\n            <div className=\"navbar\" data-testid=\"navbar\">\r\n                <Link to=\"#\" className='menu-bar' data-testid=\"menu-link\">\r\n                    {\r\n                     sideBar \r\n                     ? <span data-testid=\"close\"><AiOutlineClose size={28} color={isLightTheme ? \"black\" : \"white\"} onClick={() => {setSideBar(!sideBar)}}/> </span>\r\n                     : <span data-testid=\"bar\"><FaBars size={28} color={isLightTheme ? \"black\" : \"white\"} onClick={() => {setSideBar(!sideBar)}}/>  </span>\r\n                    }\r\n                </Link> \r\n            </div>\r\n        </header>\r\n    );\r\n}","import React, { useState, useRef }from 'react';\r\nimport { FaDownload, FaHeart } from 'react-icons/fa';\r\nimport { useFavouriteValue, useThemeValue } from '../../context';\r\nimport './IndividualImage.css';\r\n\r\nexport const IndividualImage = ({index, id, regular, alt_description}) => {\r\n\r\n    const { isLightTheme } = useThemeValue();\r\n    const { globalState, dispatch } = useFavouriteValue();\r\n\r\n    const [isFavourite, setIsFavourite] = useState(globalState.favList.find(x => x.id === id));\r\n    \r\n    const downloadCoverRef = useRef(null);\r\n    const favouriteCoverRef = useRef(null);\r\n  \r\n    function displayButtons() {\r\n        downloadCoverRef.current.style.zIndex = 0;\r\n        favouriteCoverRef.current.style.zIndex = 0;\r\n    }\r\n\r\n    const handleFavorite = () => {\r\n        var action;\r\n        if(isFavourite) {\r\n          action = {\r\n            type: \"REMOVE_FAV\",\r\n            payload: {\r\n              favImage: { id }\r\n            }\r\n          };\r\n        }\r\n        else {\r\n          action = {\r\n            type: \"ADD_FAV\",\r\n            payload: {\r\n              favImage: { id, regular, alt_description }\r\n            }\r\n          };\r\n        }\r\n      \r\n        dispatch(action);\r\n        setIsFavourite(!isFavourite);\r\n    }\r\n\r\n    const downloadImage = (idd, imageUrl)  => {\r\n        fetch(imageUrl, {\r\n          method: \"GET\",\r\n          headers: {}\r\n        })\r\n          .then(response => {\r\n            response.arrayBuffer().then((buffer) => {\r\n              const url = window.URL.createObjectURL(new Blob([buffer]));\r\n              const link = document.createElement(\"a\");\r\n              link.href = url;\r\n              link.setAttribute(\"download\", `${idd}.png`);\r\n              document.body.appendChild(link);\r\n              link.click();\r\n            });\r\n          })\r\n          .catch(err => {\r\n            console.log(err);\r\n          });\r\n    };\r\n\r\n    return (\r\n        <li key={index} className=\"img-list-item\" data-testid=\"img-list-item\"> { \r\n            <div className=\"img-container\" data-testid=\"img-container\">\r\n              <button\r\n                className=\"favourite-button\"\r\n                data-testid=\"favourite-button\"\r\n                aria-label=\"favourite button\"\r\n                onClick={() => {handleFavorite()}}\r\n              >\r\n                <span className=\"cover favourite-icon\"> \r\n                  <FaHeart color={isFavourite ? \"red\" : isLightTheme ? \"black\" : \"white\"} /> \r\n                </span> \r\n                <span ref={favouriteCoverRef} className= {isLightTheme ? \"cover white-cover\" : \"cover black-cover\"} />        \r\n              </button>\r\n\r\n              <button\r\n                className=\"download-button\"\r\n                data-testid=\"download-button\"\r\n                aria-label=\"download button\"\r\n                onClick={() => { downloadImage(id, regular)}}\r\n              >\r\n                <span className=\"cover download-icon\"> \r\n                  <FaDownload color={isLightTheme ? \"black\" : \"white\"} /> \r\n                </span> \r\n                <span ref={downloadCoverRef} className= {isLightTheme ? \"cover white-cover\" : \"cover black-cover\"} />        \r\n              </button>\r\n\r\n               <img \r\n                  alt={alt_description}\r\n                  aria-label={alt_description}\r\n                  className=\"img-card\"  \r\n                  data-testid=\"img-card\"\r\n                  onLoad={() => {displayButtons()}}\r\n                  src={regular}\r\n              />\r\n           </div> }\r\n          </li> \r\n    );\r\n}","export const BASE_URL = process.env.REACT_APP_BASE_URL;\r\nexport const CLIENT_ID = process.env.REACT_APP_CLIENT_ID;","import React, { useRef, useCallback } from 'react';\r\nimport { IndividualImage } from '../individual-image/IndividualImage';\r\nimport {  useQueryValue, usePageNumberValue } from '../../context';\r\nimport { useImageSearch } from '../../hooks';\r\nimport './ImageGallery.css';\r\n\r\nexport const ImageGallery = () => {\r\n\r\n  const { query } = useQueryValue();\r\n  const { pageNumber, setPageNumber } = usePageNumberValue();\r\n  \r\n  const { images, loading, hasMore } = useImageSearch(query, pageNumber);\r\n\r\n  const observer = useRef();\r\n\r\n  const lastImageElementRef = useCallback(node => {\r\n    if (loading) return;\r\n    if (observer.current) observer.current.disconnect();\r\n    observer.current = new IntersectionObserver(entries => {\r\n      if (entries[0].isIntersecting && hasMore) {\r\n          setPageNumber(prevPageNumber => prevPageNumber + 1);\r\n      }\r\n    });\r\n    if (node) observer.current.observe(node);\r\n  }, [loading, hasMore]);\r\n  \r\n  return (\r\n      <div \r\n        className=\"image-gallery\"\r\n        data-testid=\"image-gallery\"\r\n      >\r\n         { \r\n          <ul className=\"image-gallery-ul\" data-testid=\"image-gallery-ul\">\r\n              {images.map((image, index) => { \r\n                return (                  \r\n                  <IndividualImage\r\n                    index={index}\r\n                    id={image.id}\r\n                    regular={image.urls.regular}\r\n                    alt_description={image.alt_description}\r\n                  />\r\n                );\r\n              })}\r\n             <span ref={lastImageElementRef}></span>   \r\n          </ul> \r\n         }\r\n      </div>\r\n  );    \r\n}","import { useState, useEffect } from 'react';\r\nimport { BASE_URL, CLIENT_ID } from '../util/constants';\r\nimport axios from 'axios';\r\n\r\nexport const useImageSearch = (query, pageNumber) => {\r\n\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState(false)\r\n  const [images, setImages] = useState([])\r\n  const [hasMore, setHasMore] = useState(false)\r\n    \r\n  useEffect(() => {\r\n    setImages([]);\r\n  }, [query])\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    setError(false);\r\n\r\n    async function fetchImages() {\r\n      await axios({\r\n        method: 'GET',\r\n        url: BASE_URL,\r\n        params: { client_id: CLIENT_ID, query: query, page: pageNumber },\r\n      }).then(res => {\r\n          setImages(prevImages => (\r\n              [...prevImages, ...res.data.results]\r\n          ))\r\n        setHasMore(res.data.results.length > 0)\r\n        setLoading(false)\r\n      }).catch(e => {\r\n        setError(true)\r\n      })\r\n    }\r\n\r\n    fetchImages();\r\n  \r\n\r\n  }, [query, pageNumber]);\r\n  \r\n  return { loading, error, images, hasMore }\r\n}\r\n","import React from 'react';\r\nimport { IndividualImage } from '../individual-image/IndividualImage';\r\nimport { useFavouriteValue } from '../../context';\r\nimport './FavouriteGallery.css';\r\n\r\nexport const FavouriteGallery = () => {\r\n\r\n  const { globalState } = useFavouriteValue();\r\n\r\n  return (\r\n      <div \r\n        className=\"fav-gallery\"\r\n        data-testid=\"fav-gallery\"\r\n      >\r\n         { \r\n          <ul className=\"fav-gallery-ul\" data-testid=\"fav-gallery-ul\">\r\n              {globalState.favList.map((fav, index) => { \r\n                return (                  \r\n                  <IndividualImage\r\n                    index={index}\r\n                    id={fav.id}\r\n                    regular={fav.regular}\r\n                    alt_description={fav.alt_description}\r\n                  />\r\n                );\r\n              })}\r\n          </ul> \r\n         }\r\n      </div>\r\n  );    \r\n}","import React from 'react';\r\nimport { ImageGallery } from '../../components';\r\nimport { useThemeValue } from '../../context';\r\n\r\nexport const Home = () => {\r\n  \r\n  const { isLightTheme } = useThemeValue();\r\n\r\n  isLightTheme \r\n  ? document.getElementsByTagName('body')[0].setAttribute('style', 'background-color:#F0F2F5')\r\n  : document.getElementsByTagName('body')[0].setAttribute('style', 'background-color:black');\r\n\r\n    return (\r\n        <>\r\n           <ImageGallery /> \r\n        </>\r\n    );\r\n}","import React from 'react';\r\nimport { FavouriteGallery } from '../../components';\r\nimport { useThemeValue } from '../../context';\r\n\r\nexport const Favourite = () => {\r\n\r\n    const { isLightTheme } = useThemeValue();\r\n\r\n    isLightTheme \r\n    ? document.getElementsByTagName('body')[0].setAttribute('style', 'background-color:#F0F2F5')\r\n    : document.getElementsByTagName('body')[0].setAttribute('style', 'background-color:black');\r\n\r\n    return (\r\n        <>\r\n        <FavouriteGallery />\r\n        </>\r\n    );\r\n}","import React from 'react';  \r\nimport './Error.css';\r\nimport { useThemeValue } from '../../context';\r\n\r\nexport const Error = () => {\r\n\r\n    const { isLightTheme } = useThemeValue();\r\n\r\n    isLightTheme \r\n    ? document.getElementsByTagName('body')[0].setAttribute('style', 'background-color:#F0F2F5')\r\n    : document.getElementsByTagName('body')[0].setAttribute('style', 'background-color:black');\r\n\r\n    return (\r\n        <div className=\"error\" data-testid=\"error\">\r\n            <h2 className={isLightTheme ? \"light-mode\" : \"dark-mode\"}>Oops! Page not found.</h2>\r\n            <h1 className={isLightTheme ? \"light-mode\" : \"dark-mode\"}>404</h1>\r\n            <h3 className={isLightTheme ? \"light-mode\" : \"dark-mode\"}>Sorry, this page isn't available.</h3>\r\n        </div>\r\n    );\r\n\r\n}","import React from 'react';\nimport { ThemeContextProvider, FavouriteContextProvider, SearchQueryContextProvider } from './context';\nimport { Home, Favourite, Error } from './views';\nimport { Header } from './components';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from 'react-router-dom';\nimport './App.css';\n\nexport const App = () => {\n\n  return (\n      <ThemeContextProvider>\n          <FavouriteContextProvider>\n            <SearchQueryContextProvider>\n              <Router>\n                  <Header /> \n                  <Switch>\n                      <Route exact path=\"/\">\n                          <Home />\n                      </Route>\n                      <Route exact path=\"/favourite\">\n                          <Favourite />\n                      </Route>\n                      <Router path=\"*\">\n                          <Error />\n                      </Router>\n                  </Switch>\n              </Router>\n            </SearchQueryContextProvider>\n          </FavouriteContextProvider>\n      </ThemeContextProvider>\n  );\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}