(this["webpackJsonpimage-search"]=this["webpackJsonpimage-search"]||[]).push([[0],{20:function(e,t,a){e.exports=a(46)},25:function(e,t,a){},26:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(17),l=a.n(r),u=(a(25),a(4)),s=a(2),o=Object(n.createContext)(),i=function(e){var t=e.children,a=Object(n.useState)("mountains"),r=Object(s.a)(a,2),l=r[0],u=r[1],i=Object(n.useState)(1),m=Object(s.a)(i,2),b=m[0],d=m[1];return c.a.createElement(o.Provider,{value:{query:l,setQuery:u,pageNumber:b,setPageNumber:d}},t)},m=function(){return Object(n.useContext)(o)},b=Object(n.createContext)(),d=function(e){var t=e.children,a=Object(n.useState)(!0),r=Object(s.a)(a,2),l=r[0],u=r[1];return c.a.createElement(b.Provider,{value:{isLightTheme:l,setIsLightTheme:u}},t)},h=function(){return Object(n.useContext)(b)},f=(a(26),function(){var e=h().isLightTheme,t=m(),a=t.setQuery,n=t.setPageNumber;return c.a.createElement("div",{className:e?"search-container":"search-container-dark"},c.a.createElement("span",null," ",c.a.createElement(u.b,null)," "),c.a.createElement("input",{type:"text",className:"search-bar",placeholder:"Search...",onKeyDown:function(e){"Enter"===e.key&&(a(e.target.value),n(1))}}))}),g=function(){var e=h(),t=e.isLightTheme,a=e.setIsLightTheme;return c.a.createElement("header",{className:t?"header-light":"header-dark","data-testid":"header"},c.a.createElement("span",null," ",c.a.createElement(f,null)),c.a.createElement("label",null,c.a.createElement("input",{type:"checkbox",onClick:function(){return a(!t)}}),c.a.createElement("span",{className:"check"})))},E=a(6),p=a.n(E),O=a(7),j=a(18),y="https://api.unsplash.com/search/photos",k="trb7uyf9NVWTe7AkQKmm3V9ZU4tUMjEmNMYVO2YCZik",N=a(19),v=a.n(N),w=(a(45),function(){var e=h().isLightTheme,t=m().setPageNumber,a=function(){var e=Object(n.useState)(!0),t=Object(s.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),l=Object(s.a)(r,2),u=l[0],o=l[1],i=Object(n.useState)([]),b=Object(s.a)(i,2),d=b[0],h=b[1],f=Object(n.useState)(!1),g=Object(s.a)(f,2),E=g[0],N=g[1],w=m(),T=w.query,C=w.pageNumber;return Object(n.useEffect)((function(){h([])}),[T]),Object(n.useEffect)((function(){function e(){return(e=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({method:"GET",url:y,params:{client_id:k,query:T,page:C}}).then((function(e){h((function(t){return[].concat(Object(O.a)(t),Object(O.a)(e.data.results))})),N(e.data.results.length>0),c(!1)})).catch((function(e){o(!0)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c(!0),o(!1),function(){e.apply(this,arguments)}()}),[T,C]),{loading:a,error:u,images:d,hasMore:E}}(),r=a.images,l=a.hasMore,o=a.loading;e?document.getElementsByTagName("body")[0].setAttribute("style","background-color:#F0F2F5"):document.getElementsByTagName("body")[0].setAttribute("style","background-color:black");var i=Object(n.useRef)(),b=Object(n.useCallback)((function(e){o||(i.current&&i.current.disconnect(),i.current=new IntersectionObserver((function(e){e[0].isIntersecting&&l&&t((function(e){return e+1}))})),e&&i.current.observe(e))}),[o,l]),d=function(e,t){fetch(t,{method:"GET",headers:{}}).then((function(t){t.arrayBuffer().then((function(t){var a=window.URL.createObjectURL(new Blob([t])),n=document.createElement("a");n.href=a,n.setAttribute("download","".concat(e,".png")),document.body.appendChild(n),n.click()}))})).catch((function(e){console.log(e)}))};return c.a.createElement("div",{className:"image-gallery "},c.a.createElement("ul",null,r.map((function(e,t){return r.length===t+1?c.a.createElement("li",{key:t,className:"list"}," ",c.a.createElement("div",{className:"img-container"},!o&&c.a.createElement("button",{className:"downloadButton",onClick:function(){d(e.id,e.urls.regular)}},c.a.createElement(u.a,{color:"black"})),c.a.createElement("img",{alt:e.alt_description,className:"card",ref:b,src:e.urls.regular}))):c.a.createElement("li",{key:t,className:"list"}," ",c.a.createElement("div",{className:"img-container"},!o&&c.a.createElement("button",{className:"downloadButton",onClick:function(){d(e.id,e.urls.regular)}},c.a.createElement(u.a,{color:"black"})),c.a.createElement("img",{alt:e.alt_description,className:"card",src:e.urls.regular})))}))))}),T=function(){return c.a.createElement(d,null,c.a.createElement(i,null,c.a.createElement(g,null),c.a.createElement(w,null)))};l.a.render(c.a.createElement(T,null),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.3b2fd62c.chunk.js.map