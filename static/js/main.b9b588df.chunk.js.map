{"version":3,"sources":["context/query-context.js","context/theme-context.js","components/header/search/SearchBar.js","components/header/Header.js","util/constants.js","components/image-gallery/ImageGallery.js","hooks/useImageSearch.js","App.js","index.js"],"names":["SearchQueryContext","createContext","SearchQueryContextProvider","children","useState","query","setQuery","pageNumber","setPageNumber","Provider","value","useQueryValue","useContext","usePageNumberValue","ThemeContext","ThemeContextProvider","isLightTheme","setIsLightTheme","useThemeValue","SearchBar","className","data-testid","aria-label","type","placeholder","onKeyDown","e","key","target","Header","onClick","BASE_URL","process","CLIENT_ID","ImageGallery","loading","setLoading","error","setError","images","setImages","hasMore","setHasMore","useEffect","a","axios","method","url","params","client_id","page","then","res","prevImages","data","results","length","catch","fetchImages","useImageSearch","document","getElementsByTagName","setAttribute","observer","useRef","lastImageElementRef","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","prevPageNumber","observe","downloadImage","id","imageUrl","fetch","headers","response","arrayBuffer","buffer","window","URL","createObjectURL","Blob","link","createElement","href","body","appendChild","click","err","console","log","map","image","index","urls","regular","color","alt","alt_description","ref","src","App","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.b9b588df.chunk.js","sourcesContent":["import React, { createContext, useContext, useState } from 'react';\r\n\r\nexport const SearchQueryContext = createContext();\r\n\r\nexport const SearchQueryContextProvider = ({ children }) => {\r\n  const [query, setQuery] = useState(\"mountains\");\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  return (\r\n    <SearchQueryContext.Provider value={{query, setQuery, pageNumber, setPageNumber}}>\r\n      {children}\r\n    </SearchQueryContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useQueryValue = () => {\r\n  const { query, setQuery } = useContext(SearchQueryContext);\r\n  return {query, setQuery };\r\n} \r\n\r\nexport const usePageNumberValue = () => {\r\n  const { pageNumber, setPageNumber } = useContext(SearchQueryContext);\r\n  return { pageNumber, setPageNumber }\r\n} ","import React, { createContext, useContext, useState } from 'react';\r\n\r\nexport const ThemeContext = createContext();\r\n\r\nexport const  ThemeContextProvider = ({ children }) => {\r\n  const [ isLightTheme, setIsLightTheme ] = useState(true);\r\n\r\n  return (\r\n    <ThemeContext.Provider value={{isLightTheme, setIsLightTheme}}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useThemeValue = () => useContext(ThemeContext);","import React from 'react';\r\nimport { FaSearch } from 'react-icons/fa';\r\nimport { useThemeValue, useQueryValue, usePageNumberValue } from '../../../context';\r\nimport './SearchBar.css'\r\n\r\nexport const SearchBar = () => {\r\n\r\n    const { isLightTheme } = useThemeValue();\r\n    const  { setQuery }  = useQueryValue();\r\n    const  { setPageNumber }  = usePageNumberValue();\r\n    return (\r\n        <div \r\n            className={isLightTheme ? \"search-container\" : \"search-container-dark\" }\r\n            data-testid={isLightTheme ? \"search-container\" : \"search-container-dark\"}\r\n        >  \r\n            <span data-testid=\"search-icon\"> <FaSearch /> </span>\r\n            <input \r\n                aria-label=\"search-query\"\r\n                type=\"text\" \r\n                className=\"search-bar\"\r\n                placeholder=\"Search...\"\r\n                onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                        setQuery(e.target.value);\r\n                        setPageNumber(1);\r\n                    }\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}","import React from 'react';\r\nimport './Header.css'\r\nimport { SearchBar } from './search/SearchBar';\r\nimport { useThemeValue } from '../../context';\r\n\r\nexport const Header = () => {\r\n    const { isLightTheme, setIsLightTheme } = useThemeValue();\r\n\r\n    return (\r\n        <header \r\n            className={isLightTheme ? \"header-light\" : \"header-dark\" }\r\n            data-testid={isLightTheme ? \"header-light\" : \"header-dark\" }\r\n        >\r\n            <span> <SearchBar /></span>\r\n            <label>\r\n                <input \r\n                    aria-label=\"switch-theme\"\r\n                    type=\"checkbox\" \r\n                    onClick={() => setIsLightTheme(!isLightTheme)} />\r\n                <span className=\"check\"></span>\r\n            </label>\r\n        </header>\r\n    );\r\n}","export const BASE_URL = process.env.REACT_APP_BASE_URL;\r\nexport const CLIENT_ID = process.env.REACT_APP_CLIENT_ID;","import React, { useRef, useCallback }from 'react';\r\nimport { useThemeValue, useQueryValue, usePageNumberValue } from '../../context';\r\nimport { useImageSearch } from '../../hooks';\r\nimport { FaDownload } from 'react-icons/fa';\r\nimport './ImageGallery.css'\r\n\r\n\r\nexport const ImageGallery = () => {\r\n\r\n  const { isLightTheme } = useThemeValue();\r\n\r\n  const { query } = useQueryValue();\r\n  const { pageNumber, setPageNumber } = usePageNumberValue();\r\n  \r\n  const { images, hasMore, loading } = useImageSearch(query, pageNumber);\r\n\r\n  isLightTheme ? \r\n    document.getElementsByTagName('body')[0].setAttribute('style', 'background-color:#F0F2F5') :\r\n    document.getElementsByTagName('body')[0].setAttribute('style', 'background-color:black');\r\n  \r\n  const observer = useRef();\r\n\r\n  const lastImageElementRef = useCallback(node => {\r\n      if (loading) return\r\n      if (observer.current) observer.current.disconnect()\r\n      observer.current = new IntersectionObserver(entries => {\r\n        if (entries[0].isIntersecting && hasMore) {\r\n            setPageNumber(prevPageNumber => prevPageNumber + 1);\r\n        }\r\n      })\r\n      if (node) observer.current.observe(node);\r\n  }, [loading, hasMore])\r\n\r\n\r\n  const downloadImage = (id, imageUrl) => {\r\n      fetch(imageUrl, {\r\n        method: \"GET\",\r\n        headers: {}\r\n      })\r\n        .then(response => {\r\n          response.arrayBuffer().then((buffer) => {\r\n            const url = window.URL.createObjectURL(new Blob([buffer]));\r\n            const link = document.createElement(\"a\");\r\n            link.href = url;\r\n            link.setAttribute(\"download\", `${id}.png`);\r\n            document.body.appendChild(link);\r\n            link.click();\r\n          });\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    };\r\n\r\n  return (\r\n      <div \r\n        className=\"image-gallery \"\r\n        data-testid=\"image-gallery\"\r\n      >\r\n         { \r\n          <ul>\r\n              {images.map((image, index) => {\r\n                  if (images.length === index + 1) {\r\n                    return  (\r\n                      <li key={index} className=\"img-list-item\" data-testid=\"img-list-item\"> {    \r\n                        <div className=\"img-container\" data-testid=\"img-container\">\r\n                           <button\r\n                            className=\"download-button\"\r\n                            data-testid=\"download-button\"\r\n                            onClick={() => { downloadImage(image.id, image.urls.regular)}}\r\n                           >\r\n                              <FaDownload color=\"black\" />\r\n                          </button> \r\n                          <img \r\n                            alt={image.alt_description}\r\n                            className=\"img-card\"  \r\n                            data-testid=\"img-card\"\r\n                            ref={lastImageElementRef} \r\n                            src={image.urls.regular}\r\n                          />\r\n\r\n                        </div> }   \r\n                      </li> )\r\n                  } else {\r\n                      return  (\r\n                          <li key={index} className=\"img-list-item\" data-testid=\"img-list-item\"> { \r\n                            <div className=\"img-container\" data-testid=\"img-container\">\r\n                              <button\r\n                                className=\"download-button\"\r\n                                data-testid=\"download-button\"\r\n                                onClick={() => { downloadImage(image.id, image.urls.regular)}}\r\n                              >\r\n                                  <FaDownload color=\"black\" />\r\n                              </button>\r\n                               <img \r\n                                  alt={image.alt_description}\r\n                                  className=\"img-card\"  \r\n                                  data-testid=\"img-card\"\r\n                                  src={image.urls.regular}\r\n                              />\r\n                           </div> }    \r\n                          </li> )\r\n                  }})}\r\n          </ul> \r\n         }\r\n      </div>\r\n  );    \r\n}","import { useState, useEffect } from 'react';\r\nimport { BASE_URL, CLIENT_ID } from '../util/constants';\r\nimport axios from 'axios';\r\n\r\nexport const useImageSearch = (query, pageNumber) => {\r\n\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState(false)\r\n  const [images, setImages] = useState([])\r\n  const [hasMore, setHasMore] = useState(false)\r\n    \r\n  useEffect(() => {\r\n    setImages([]);\r\n  }, [query])\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    setError(false);\r\n\r\n    async function fetchImages() {\r\n      await axios({\r\n        method: 'GET',\r\n        url: BASE_URL,\r\n        params: { client_id: CLIENT_ID, query: query, page: pageNumber },\r\n      }).then(res => {\r\n          setImages(prevImages => (\r\n              [...prevImages, ...res.data.results]\r\n          ))\r\n        setHasMore(res.data.results.length > 0)\r\n        setLoading(false)\r\n      }).catch(e => {\r\n        setError(true)\r\n      })\r\n    }\r\n\r\n    fetchImages();\r\n  \r\n\r\n  }, [query, pageNumber]);\r\n  \r\n  return { loading, error, images, hasMore }\r\n}\r\n","import React from 'react';\nimport { Header, ImageGallery } from './components';\nimport { ThemeContextProvider, SearchQueryContextProvider } from './context';\n\nexport const App = () => {\n\n  return (\n    <ThemeContextProvider>\n      <SearchQueryContextProvider>\n          <Header />\n          <ImageGallery />\n      </SearchQueryContextProvider>\n    </ThemeContextProvider>\n  );\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}