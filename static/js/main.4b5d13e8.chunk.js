(this["webpackJsonpimage-search"]=this["webpackJsonpimage-search"]||[]).push([[0],{20:function(e,t,a){e.exports=a(46)},25:function(e,t,a){},26:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),i=a.n(c),l=(a(25),a(4)),s=a(2),u=Object(n.createContext)(),o=function(e){var t=e.children,a=Object(n.useState)("mountains"),c=Object(s.a)(a,2),i=c[0],l=c[1],o=Object(n.useState)(1),m=Object(s.a)(o,2),d=m[0],b=m[1];return r.a.createElement(u.Provider,{value:{query:i,setQuery:l,pageNumber:d,setPageNumber:b}},t)},m=function(){var e=Object(n.useContext)(u);return{query:e.query,setQuery:e.setQuery}},d=function(){var e=Object(n.useContext)(u);return{pageNumber:e.pageNumber,setPageNumber:e.setPageNumber}},b=Object(n.createContext)(),h=function(e){var t=e.children,a=Object(n.useState)(!0),c=Object(s.a)(a,2),i=c[0],l=c[1];return r.a.createElement(b.Provider,{value:{isLightTheme:i,setIsLightTheme:l}},t)},g=function(){return Object(n.useContext)(b)},f=(a(26),function(){var e=g().isLightTheme,t=m().setQuery,a=d().setPageNumber;return r.a.createElement("div",{className:e?"search-container":"search-container-dark","data-testid":e?"search-container":"search-container-dark"},r.a.createElement("span",{"data-testid":"search-icon"}," ",r.a.createElement(l.b,null)," "),r.a.createElement("input",{"aria-label":"search-query",type:"text",className:"search-bar",placeholder:"Search...",onKeyDown:function(e){"Enter"===e.key&&(t(e.target.value),a(1))}}))}),E=function(){var e=g(),t=e.isLightTheme,a=e.setIsLightTheme;return r.a.createElement("header",{className:t?"header-light":"header-dark","data-testid":t?"header-light":"header-dark"},r.a.createElement("span",null," ",r.a.createElement(f,null)),r.a.createElement("label",null,r.a.createElement("input",{"aria-label":"switch-theme",type:"checkbox",onClick:function(){return a(!t)}}),r.a.createElement("span",{className:"check"})))},p=a(6),y=a.n(p),O=a(7),j=a(18),N="https://api.unsplash.com/search/photos",v="ZxptYWJJiQN0ZzjOaqTZ21E1YF6xT2eYDGf-tE3RSaA",k=a(19),w=a.n(k),x=(a(45),function(){var e=g().isLightTheme,t=m().query,a=d(),c=a.pageNumber,i=a.setPageNumber,u=function(e,t){var a=Object(n.useState)(!0),r=Object(s.a)(a,2),c=r[0],i=r[1],l=Object(n.useState)(!1),u=Object(s.a)(l,2),o=u[0],m=u[1],d=Object(n.useState)([]),b=Object(s.a)(d,2),h=b[0],g=b[1],f=Object(n.useState)(!1),E=Object(s.a)(f,2),p=E[0],k=E[1];return Object(n.useEffect)((function(){g([])}),[e]),Object(n.useEffect)((function(){function a(){return(a=Object(j.a)(y.a.mark((function a(){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w()({method:"GET",url:N,params:{client_id:v,query:e,page:t}}).then((function(e){g((function(t){return[].concat(Object(O.a)(t),Object(O.a)(e.data.results))})),k(e.data.results.length>0),i(!1)})).catch((function(e){m(!0)}));case 2:case"end":return a.stop()}}),a)})))).apply(this,arguments)}i(!0),m(!1),function(){a.apply(this,arguments)}()}),[e,t]),{loading:c,error:o,images:h,hasMore:p}}(t,c),o=u.images,b=u.hasMore,h=u.loading;e?document.getElementsByTagName("body")[0].setAttribute("style","background-color:#F0F2F5"):document.getElementsByTagName("body")[0].setAttribute("style","background-color:black");var f=Object(n.useRef)(),E=Object(n.useCallback)((function(e){h||(f.current&&f.current.disconnect(),f.current=new IntersectionObserver((function(e){e[0].isIntersecting&&b&&i((function(e){return e+1}))})),e&&f.current.observe(e))}),[h,b]),p=function(e,t){fetch(t,{method:"GET",headers:{}}).then((function(t){t.arrayBuffer().then((function(t){var a=window.URL.createObjectURL(new Blob([t])),n=document.createElement("a");n.href=a,n.setAttribute("download","".concat(e,".png")),document.body.appendChild(n),n.click()}))})).catch((function(e){console.log(e)}))};return r.a.createElement("div",{className:"image-gallery ","data-testid":"image-gallery"},r.a.createElement("ul",null,o.map((function(e,t){return o.length===t+1?r.a.createElement("li",{key:t,className:"img-list-item","data-testid":"img-list-item"}," ",r.a.createElement("div",{className:"img-container","data-testid":"img-container"},r.a.createElement("button",{className:"download-button","data-testid":"download-button",onClick:function(){p(e.id,e.urls.regular)}},r.a.createElement(l.a,{color:"black"})),r.a.createElement("img",{alt:e.alt_description,className:"img-card","data-testid":"img-card",ref:E,src:e.urls.regular}))):r.a.createElement("li",{key:t,className:"img-list-item","data-testid":"img-list-item"}," ",r.a.createElement("div",{className:"img-container","data-testid":"img-container"},r.a.createElement("button",{className:"download-button","data-testid":"download-button",onClick:function(){p(e.id,e.urls.regular)}},r.a.createElement(l.a,{color:"black"})),r.a.createElement("img",{alt:e.alt_description,className:"img-card","data-testid":"img-card",src:e.urls.regular})))}))))}),T=function(){return r.a.createElement(h,null,r.a.createElement(o,null,r.a.createElement(E,null),r.a.createElement(x,null)))};i.a.render(r.a.createElement(T,null),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.4b5d13e8.chunk.js.map