(this["webpackJsonpimage-search"]=this["webpackJsonpimage-search"]||[]).push([[0],{17:function(e,t,a){},21:function(e,t,a){e.exports=a(46)},26:function(e,t,a){},27:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),u=a.n(c),i=(a(26),a(5)),s=a(2),l=Object(n.createContext)(),o=function(e){var t=e.children,a=Object(n.useState)("mountains"),c=Object(s.a)(a,2),u=c[0],i=c[1],o=Object(n.useState)(1),m=Object(s.a)(o,2),d=m[0],b=m[1];return r.a.createElement(l.Provider,{value:{query:u,setQuery:i,pageNumber:d,setPageNumber:b}},t)},m=function(){var e=Object(n.useContext)(l);return{query:e.query,setQuery:e.setQuery}},d=function(){var e=Object(n.useContext)(l);return{pageNumber:e.pageNumber,setPageNumber:e.setPageNumber}},b=Object(n.createContext)(),h=function(e){var t=e.children,a=Object(n.useState)(!0),c=Object(s.a)(a,2),u=c[0],i=c[1];return r.a.createElement(b.Provider,{value:{isLightTheme:u,setIsLightTheme:i}},t)},g=function(){return Object(n.useContext)(b)},f=(a(27),function(){var e=g().isLightTheme,t=m().setQuery,a=d().setPageNumber;return r.a.createElement("div",{className:e?"search-container":"search-container-dark","data-testid":e?"search-container":"search-container-dark"},r.a.createElement("span",{"data-testid":"search-icon"}," ",r.a.createElement(i.b,null)," "),r.a.createElement("input",{"aria-label":"search-query",type:"text",className:"search-bar",placeholder:"Search...",onKeyDown:function(e){"Enter"===e.key&&(t(e.target.value),a(1))}}))}),p=function(){var e=g(),t=e.isLightTheme,a=e.setIsLightTheme;return r.a.createElement("header",{className:t?"header-light":"header-dark","data-testid":t?"header-light":"header-dark"},r.a.createElement("span",null," ",r.a.createElement(f,null)),r.a.createElement("label",null,r.a.createElement("input",{"aria-label":"switch-theme",type:"checkbox",onClick:function(){return a(!t)}}),r.a.createElement("span",{className:"check"})))},E=a(6),y=a.n(E),O=a(7),j=a(19),v="https://api.unsplash.com/search/photos",N="trb7uyf9NVWTe7AkQKmm3V9ZU4tUMjEmNMYVO2YCZik",k=a(20),w=a.n(k),x=(a(17),function(e){var t=e.index,a=e.id,c=e.urls,u=e.alt_description,s=g().isLightTheme,l=Object(n.useRef)(null);return r.a.createElement("li",{key:t,className:"img-list-item","data-testid":"img-list-item"}," ",r.a.createElement("div",{className:"img-container","data-testid":"img-container"},r.a.createElement("button",{className:"download-button","data-testid":"download-button",onClick:function(){var e,t;e=a,t=c.regular,fetch(t,{method:"GET",headers:{}}).then((function(t){t.arrayBuffer().then((function(t){var a=window.URL.createObjectURL(new Blob([t])),n=document.createElement("a");n.href=a,n.setAttribute("download","".concat(e,".png")),document.body.appendChild(n),n.click()}))})).catch((function(e){console.log(e)}))}},r.a.createElement("span",{className:"cover download-icon"}," ",r.a.createElement(i.a,{color:s?"black":"white"})," "),r.a.createElement("span",{ref:l,className:s?"cover white-cover":"cover black-cover"})),r.a.createElement("img",{alt:u,className:"img-card","data-testid":"img-card",onLoad:function(){l.current.style.zIndex=0},src:c.regular})))}),T=function(){var e=g().isLightTheme,t=m().query,a=d(),c=a.pageNumber,u=a.setPageNumber,i=function(e,t){var a=Object(n.useState)(!0),r=Object(s.a)(a,2),c=r[0],u=r[1],i=Object(n.useState)(!1),l=Object(s.a)(i,2),o=l[0],m=l[1],d=Object(n.useState)([]),b=Object(s.a)(d,2),h=b[0],g=b[1],f=Object(n.useState)(!1),p=Object(s.a)(f,2),E=p[0],k=p[1];return Object(n.useEffect)((function(){g([])}),[e]),Object(n.useEffect)((function(){function a(){return(a=Object(j.a)(y.a.mark((function a(){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w()({method:"GET",url:v,params:{client_id:N,query:e,page:t}}).then((function(e){g((function(t){return[].concat(Object(O.a)(t),Object(O.a)(e.data.results))})),k(e.data.results.length>0),u(!1)})).catch((function(e){m(!0)}));case 2:case"end":return a.stop()}}),a)})))).apply(this,arguments)}u(!0),m(!1),function(){a.apply(this,arguments)}()}),[e,t]),{loading:c,error:o,images:h,hasMore:E}}(t,c),l=i.images,o=i.loading,b=i.hasMore,h=Object(n.useRef)(),f=Object(n.useCallback)((function(e){o||(h.current&&h.current.disconnect(),h.current=new IntersectionObserver((function(e){e[0].isIntersecting&&b&&u((function(e){return e+1}))})),e&&h.current.observe(e))}),[o,b]);return e?document.getElementsByTagName("body")[0].setAttribute("style","background-color:#F0F2F5"):document.getElementsByTagName("body")[0].setAttribute("style","background-color:black"),r.a.createElement("div",{className:"image-gallery ","data-testid":"image-gallery"},r.a.createElement("ul",{"data-testid":"image-gallery-ul"},l.map((function(e,t){return r.a.createElement(x,{index:t,id:e.id,urls:e.urls,alt_description:e.alt_description})})),r.a.createElement("span",{ref:f})))},C=function(){return r.a.createElement(h,null,r.a.createElement(o,null,r.a.createElement(p,null),r.a.createElement(T,null)))};u.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.1266049a.chunk.js.map