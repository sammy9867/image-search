{"version":3,"sources":["context/query-context.js","context/theme-context.js","components/header/search/SearchBar.js","components/header/Header.js","util/constants.js","components/image-gallery/IndividualImage.js","components/image-gallery/ImageGallery.js","hooks/useImageSearch.js","App.js","index.js"],"names":["SearchQueryContext","createContext","SearchQueryContextProvider","children","useState","query","setQuery","pageNumber","setPageNumber","Provider","value","useQueryValue","useContext","usePageNumberValue","ThemeContext","ThemeContextProvider","isLightTheme","setIsLightTheme","useThemeValue","SearchBar","className","data-testid","aria-label","type","placeholder","onKeyDown","e","key","target","Header","onClick","BASE_URL","process","CLIENT_ID","IndividualImage","index","id","urls","alt_description","coverRef","useRef","idd","imageUrl","regular","fetch","method","headers","then","response","arrayBuffer","buffer","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","catch","err","console","log","color","ref","alt","onLoad","current","style","zIndex","src","ImageGallery","loading","setLoading","error","setError","images","setImages","hasMore","setHasMore","useEffect","a","axios","params","client_id","page","res","prevImages","data","results","length","fetchImages","useImageSearch","observer","lastImageElementRef","useCallback","node","disconnect","IntersectionObserver","entries","isIntersecting","prevPageNumber","observe","getElementsByTagName","map","image","App","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.1266049a.chunk.js","sourcesContent":["import React, { createContext, useContext, useState } from 'react';\r\n\r\nexport const SearchQueryContext = createContext();\r\n\r\nexport const SearchQueryContextProvider = ({ children }) => {\r\n  const [query, setQuery] = useState(\"mountains\");\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  return (\r\n    <SearchQueryContext.Provider value={{query, setQuery, pageNumber, setPageNumber}}>\r\n      {children}\r\n    </SearchQueryContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useQueryValue = () => {\r\n  const { query, setQuery } = useContext(SearchQueryContext);\r\n  return {query, setQuery };\r\n} \r\n\r\nexport const usePageNumberValue = () => {\r\n  const { pageNumber, setPageNumber } = useContext(SearchQueryContext);\r\n  return { pageNumber, setPageNumber }\r\n} ","import React, { createContext, useContext, useState } from 'react';\r\n\r\nexport const ThemeContext = createContext();\r\n\r\nexport const  ThemeContextProvider = ({ children }) => {\r\n  const [ isLightTheme, setIsLightTheme ] = useState(true);\r\n\r\n  return (\r\n    <ThemeContext.Provider value={{isLightTheme, setIsLightTheme}}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useThemeValue = () => useContext(ThemeContext);","import React from 'react';\r\nimport { FaSearch } from 'react-icons/fa';\r\nimport { useThemeValue, useQueryValue, usePageNumberValue } from '../../../context';\r\nimport './SearchBar.css'\r\n\r\nexport const SearchBar = () => {\r\n\r\n    const { isLightTheme } = useThemeValue();\r\n    const  { setQuery }  = useQueryValue();\r\n    const  { setPageNumber }  = usePageNumberValue();\r\n    return (\r\n        <div \r\n            className={isLightTheme ? \"search-container\" : \"search-container-dark\" }\r\n            data-testid={isLightTheme ? \"search-container\" : \"search-container-dark\"}\r\n        >  \r\n            <span data-testid=\"search-icon\"> <FaSearch /> </span>\r\n            <input \r\n                aria-label=\"search-query\"\r\n                type=\"text\" \r\n                className=\"search-bar\"\r\n                placeholder=\"Search...\"\r\n                onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                        setQuery(e.target.value);\r\n                        setPageNumber(1);\r\n                    }\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}","import React from 'react';\r\nimport './Header.css'\r\nimport { SearchBar } from './search/SearchBar';\r\nimport { useThemeValue } from '../../context';\r\n\r\nexport const Header = () => {\r\n    const { isLightTheme, setIsLightTheme } = useThemeValue();\r\n\r\n    return (\r\n        <header \r\n            className={isLightTheme ? \"header-light\" : \"header-dark\" }\r\n            data-testid={isLightTheme ? \"header-light\" : \"header-dark\" }\r\n        >\r\n            <span> <SearchBar /></span>\r\n            <label>\r\n                <input \r\n                    aria-label=\"switch-theme\"\r\n                    type=\"checkbox\" \r\n                    onClick={() => setIsLightTheme(!isLightTheme)} />\r\n                <span className=\"check\"></span>\r\n            </label>\r\n        </header>\r\n    );\r\n}","export const BASE_URL = process.env.REACT_APP_BASE_URL;\r\nexport const CLIENT_ID = process.env.REACT_APP_CLIENT_ID;","import React, { useRef }from 'react';\r\nimport { useThemeValue } from '../../context';\r\nimport { FaDownload } from 'react-icons/fa';\r\nimport './ImageGallery.css'\r\n\r\n\r\nexport const IndividualImage = ({index, id, urls, alt_description}) => {\r\n\r\n    \r\n    const { isLightTheme } = useThemeValue();\r\n\r\n    const coverRef = useRef(null);\r\n  \r\n    function displayButton() {\r\n        coverRef.current.style.zIndex = 0;\r\n    }\r\n\r\n\r\n    const downloadImage = (idd, imageUrl) => {\r\n        fetch(imageUrl, {\r\n          method: \"GET\",\r\n          headers: {}\r\n        })\r\n          .then(response => {\r\n            response.arrayBuffer().then((buffer) => {\r\n              const url = window.URL.createObjectURL(new Blob([buffer]));\r\n              const link = document.createElement(\"a\");\r\n              link.href = url;\r\n              link.setAttribute(\"download\", `${idd}.png`);\r\n              document.body.appendChild(link);\r\n              link.click();\r\n            });\r\n          })\r\n          .catch(err => {\r\n            console.log(err);\r\n          });\r\n      };\r\n\r\n    return (\r\n        <li key={index} className=\"img-list-item\" data-testid=\"img-list-item\"> { \r\n            <div className=\"img-container\" data-testid=\"img-container\">\r\n              <button\r\n                className=\"download-button\"\r\n                data-testid=\"download-button\"\r\n                onClick={() => { downloadImage(id, urls.regular)}}\r\n              >\r\n                <span className=\"cover download-icon\"> <FaDownload color={isLightTheme ? \"black\" : \"white\"} /> </span> \r\n                <span ref={coverRef}\r\n                className= {isLightTheme ? \"cover white-cover\" : \"cover black-cover\"}\r\n                >        \r\n                </span>\r\n              </button>\r\n               <img \r\n                  alt={alt_description}\r\n                  className=\"img-card\"  \r\n                  data-testid=\"img-card\"\r\n                  onLoad={() => {displayButton()}}\r\n                  src={urls.regular}\r\n              />\r\n           </div> }    \r\n          </li> \r\n    );\r\n\r\n}","import React, { useRef, useCallback } from 'react';\r\nimport { useThemeValue, useQueryValue, usePageNumberValue } from '../../context';\r\nimport { useImageSearch } from '../../hooks';\r\nimport './ImageGallery.css'\r\nimport { IndividualImage } from './IndividualImage'\r\n\r\n\r\nexport const ImageGallery = () => {\r\n\r\n  const { isLightTheme } = useThemeValue();\r\n\r\n  const { query } = useQueryValue();\r\n  const { pageNumber, setPageNumber } = usePageNumberValue();\r\n  \r\n  const { images, loading, hasMore } = useImageSearch(query, pageNumber);\r\n  const observer = useRef();\r\n  const lastImageElementRef = useCallback(node => {\r\n    if (loading) return\r\n    if (observer.current) observer.current.disconnect()\r\n    observer.current = new IntersectionObserver(entries => {\r\n      if (entries[0].isIntersecting && hasMore) {\r\n          setPageNumber(prevPageNumber => prevPageNumber + 1);\r\n      }\r\n    })\r\n    if (node) observer.current.observe(node);\r\n}, [loading, hasMore])\r\n\r\n  isLightTheme ? \r\n    document.getElementsByTagName('body')[0].setAttribute('style', 'background-color:#F0F2F5') :\r\n    document.getElementsByTagName('body')[0].setAttribute('style', 'background-color:black');\r\n  \r\n \r\n  return (\r\n      <div \r\n        className=\"image-gallery \"\r\n        data-testid=\"image-gallery\"\r\n      >\r\n         { \r\n          <ul data-testid=\"image-gallery-ul\">\r\n              {images.map((image, index) => { \r\n                return (                  \r\n                  <IndividualImage \r\n                    index={index}\r\n                    id={image.id}\r\n                    urls={image.urls}\r\n                    alt_description={image.alt_description}\r\n                  />\r\n                );\r\n              })}\r\n             <span ref={lastImageElementRef}></span>   \r\n          </ul> \r\n         }\r\n      </div>\r\n  );    \r\n}","import { useState, useEffect } from 'react';\r\nimport { BASE_URL, CLIENT_ID } from '../util/constants';\r\nimport axios from 'axios';\r\n\r\nexport const useImageSearch = (query, pageNumber) => {\r\n\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState(false)\r\n  const [images, setImages] = useState([])\r\n  const [hasMore, setHasMore] = useState(false)\r\n    \r\n  useEffect(() => {\r\n    setImages([]);\r\n  }, [query])\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    setError(false);\r\n\r\n    async function fetchImages() {\r\n      await axios({\r\n        method: 'GET',\r\n        url: BASE_URL,\r\n        params: { client_id: CLIENT_ID, query: query, page: pageNumber },\r\n      }).then(res => {\r\n          setImages(prevImages => (\r\n              [...prevImages, ...res.data.results]\r\n          ))\r\n        setHasMore(res.data.results.length > 0)\r\n        setLoading(false)\r\n      }).catch(e => {\r\n        setError(true)\r\n      })\r\n    }\r\n\r\n    fetchImages();\r\n  \r\n\r\n  }, [query, pageNumber]);\r\n  \r\n  return { loading, error, images, hasMore }\r\n}\r\n","import React from 'react';\nimport { Header, ImageGallery } from './components';\nimport { ThemeContextProvider, SearchQueryContextProvider } from './context';\n\nexport const App = () => {\n\n  return (\n    <ThemeContextProvider>\n      <SearchQueryContextProvider>\n          <Header />\n          <ImageGallery />\n      </SearchQueryContextProvider>\n    </ThemeContextProvider>\n  );\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}